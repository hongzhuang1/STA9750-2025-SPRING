[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About Me",
    "section": "",
    "text": "My name is Hong Zhuang. This is my first semester in the QMM program at Baruch College. I graduated with a Bachelor degree in Business Administration from Baruch College and a Master’s degree in Science from CUNY, City College.\nCurrently, I’m working as a staff accountant at a retail start-up. I am committed to become a risk analyst at a financial institution. I have passed CFA Level1, Level2 and FRM Level1. If you share the same career path, feel free to connect with me on LinkedIn.\n\n\n\n\n\n\n\nLast Updated: Sunday 02 09, 2025 at 22:31PM"
  },
  {
    "objectID": "mini_project01.html",
    "href": "mini_project01.html",
    "title": "mini project 01",
    "section": "",
    "text": "In this project, we will use the dataset from NYC Open Data. Our goal is to analyze the city’s payroll data and the three policy proposals designed to reduce the city’s total payroll expenses.Basic description of each column in the data set can be found data page\n\n\n\n\n\nRead data into R\n\ndata &lt;- read.csv(\"~/STA9750/STA9750-2025-SPRING/data/mp01/nyc_payroll_export.csv\")\n\nNow, let’s take a quick look of the first several rows of the payroll data.\n\nlibrary(dplyr)\nglimpse(data)\n\nRows: 6,225,611\nColumns: 17\n$ fiscal_year                &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;int&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"ADMIN FOR CHILDREN'S SVCS\", \"ADMIN FOR CHI…\n$ last_name                  &lt;chr&gt; \"FAYE FALL\", \"KILGORE\", \"WISDOM\", \"MILLER\",…\n$ first_name                 &lt;chr&gt; \"SOKHNA\", \"ORLANTHA\", \"CHERISE\", \"MOYA-GAYE…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;chr&gt; \"2023-11-20T00:00:00.000\", \"2023-08-28T00:0…\n$ work_location_borough      &lt;chr&gt; \"BRONX\", \"BROOKLYN\", \"MANHATTAN\", \"MANHATTA…\n$ title_description          &lt;chr&gt; \"CHILD PROTECTIVE SPECIALIST\", \"CHILD PROTE…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"ACTIVE\", \"ACTIVE\", \"ON LEAVE\", \"ON LEAVE\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n\n\nAlso, we can take a look at each columns\n\nsummary(data)\n\n  fiscal_year   payroll_number    agency_name         last_name        \n Min.   :2014   Min.   :  2.0     Length:6225611     Length:6225611    \n 1st Qu.:2016   1st Qu.:300.0     Class :character   Class :character  \n Median :2019   Median :742.0     Mode  :character   Mode  :character  \n Mean   :2019   Mean   :573.8                                          \n 3rd Qu.:2022   3rd Qu.:747.0                                          \n Max.   :2024   Max.   :996.0                                          \n                NA's   :1745440                                        \n  first_name          mid_init         agency_start_date  work_location_borough\n Length:6225611     Length:6225611     Length:6225611     Length:6225611       \n Class :character   Class :character   Class :character   Class :character     \n Mode  :character   Mode  :character   Mode  :character   Mode  :character     \n                                                                               \n                                                                               \n                                                                               \n                                                                               \n title_description  leave_status_as_of_june_30  base_salary      \n Length:6225611     Length:6225611             Min.   :     0.0  \n Class :character   Class :character           1st Qu.:    33.2  \n Mode  :character   Mode  :character           Median : 43903.0  \n                                               Mean   : 45659.1  \n                                               3rd Qu.: 81186.0  \n                                               Max.   :414707.0  \n                                                                 \n  pay_basis         regular_hours     regular_gross_paid    ot_hours     \n Length:6225611     Min.   :-2240.0   Min.   :-205452    Min.   :-209.0  \n Class :character   1st Qu.:    0.0   1st Qu.:   3237    1st Qu.:   0.0  \n Mode  :character   Median :    0.0   Median :  35728    Median :   0.0  \n                    Mean   :  657.5   Mean   :  43170    Mean   :  65.2  \n                    3rd Qu.: 1820.0   3rd Qu.:  75766    3rd Qu.:   0.0  \n                    Max.   : 6666.0   Max.   : 684970    Max.   :3692.9  \n                                                                         \n total_ot_paid      total_other_pay    \n Min.   :-26493.9   Min.   :-281595.0  \n 1st Qu.:     0.0   1st Qu.:      0.0  \n Median :     0.0   Median :     94.2  \n Mean   :  3647.7   Mean   :   3219.1  \n 3rd Qu.:   121.9   3rd Qu.:   4133.7  \n Max.   :527532.0   Max.   : 714664.3  \n                                       \n\n\n\n\n\nHere, some formatting is needed for readability. * Convert these columns for conventional formatting *\nAfter some formatting was done, here is how the data looks like in a table."
  },
  {
    "objectID": "mini_project01.html#data",
    "href": "mini_project01.html#data",
    "title": "mini project 01",
    "section": "",
    "text": "Read data into R\n\ndata &lt;- read.csv(\"~/STA9750/STA9750-2025-SPRING/data/mp01/nyc_payroll_export.csv\")\n\nNow, let’s take a quick look of the first several rows of the payroll data.\n\nlibrary(dplyr)\nglimpse(data)\n\nRows: 6,225,611\nColumns: 17\n$ fiscal_year                &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;int&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"ADMIN FOR CHILDREN'S SVCS\", \"ADMIN FOR CHI…\n$ last_name                  &lt;chr&gt; \"FAYE FALL\", \"KILGORE\", \"WISDOM\", \"MILLER\",…\n$ first_name                 &lt;chr&gt; \"SOKHNA\", \"ORLANTHA\", \"CHERISE\", \"MOYA-GAYE…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;chr&gt; \"2023-11-20T00:00:00.000\", \"2023-08-28T00:0…\n$ work_location_borough      &lt;chr&gt; \"BRONX\", \"BROOKLYN\", \"MANHATTAN\", \"MANHATTA…\n$ title_description          &lt;chr&gt; \"CHILD PROTECTIVE SPECIALIST\", \"CHILD PROTE…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"ACTIVE\", \"ACTIVE\", \"ON LEAVE\", \"ON LEAVE\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n\n\nAlso, we can take a look at each columns\n\nsummary(data)\n\n  fiscal_year   payroll_number    agency_name         last_name        \n Min.   :2014   Min.   :  2.0     Length:6225611     Length:6225611    \n 1st Qu.:2016   1st Qu.:300.0     Class :character   Class :character  \n Median :2019   Median :742.0     Mode  :character   Mode  :character  \n Mean   :2019   Mean   :573.8                                          \n 3rd Qu.:2022   3rd Qu.:747.0                                          \n Max.   :2024   Max.   :996.0                                          \n                NA's   :1745440                                        \n  first_name          mid_init         agency_start_date  work_location_borough\n Length:6225611     Length:6225611     Length:6225611     Length:6225611       \n Class :character   Class :character   Class :character   Class :character     \n Mode  :character   Mode  :character   Mode  :character   Mode  :character     \n                                                                               \n                                                                               \n                                                                               \n                                                                               \n title_description  leave_status_as_of_june_30  base_salary      \n Length:6225611     Length:6225611             Min.   :     0.0  \n Class :character   Class :character           1st Qu.:    33.2  \n Mode  :character   Mode  :character           Median : 43903.0  \n                                               Mean   : 45659.1  \n                                               3rd Qu.: 81186.0  \n                                               Max.   :414707.0  \n                                                                 \n  pay_basis         regular_hours     regular_gross_paid    ot_hours     \n Length:6225611     Min.   :-2240.0   Min.   :-205452    Min.   :-209.0  \n Class :character   1st Qu.:    0.0   1st Qu.:   3237    1st Qu.:   0.0  \n Mode  :character   Median :    0.0   Median :  35728    Median :   0.0  \n                    Mean   :  657.5   Mean   :  43170    Mean   :  65.2  \n                    3rd Qu.: 1820.0   3rd Qu.:  75766    3rd Qu.:   0.0  \n                    Max.   : 6666.0   Max.   : 684970    Max.   :3692.9  \n                                                                         \n total_ot_paid      total_other_pay    \n Min.   :-26493.9   Min.   :-281595.0  \n 1st Qu.:     0.0   1st Qu.:      0.0  \n Median :     0.0   Median :     94.2  \n Mean   :  3647.7   Mean   :   3219.1  \n 3rd Qu.:   121.9   3rd Qu.:   4133.7  \n Max.   :527532.0   Max.   : 714664.3"
  },
  {
    "objectID": "mini_project01.html#some-formatting",
    "href": "mini_project01.html#some-formatting",
    "title": "mini project 01",
    "section": "",
    "text": "Here, some formatting is needed for readability. * Convert these columns for conventional formatting *\nAfter some formatting was done, here is how the data looks like in a table."
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "mini project 01",
    "section": "",
    "text": "In this project, we will use the data from NYC Open Data. The data set contains 6,225,611 payroll records and 17 variables, covering payroll information for about 160 agencies in NYC from fiscal years 2014 to 2024. Our goal is to analyze the payroll and evaluate three policy proposals designed to reduce the city’s total payroll expenses. You can find a basic description of the 17 variables in the data set Here.\n\n\n\nThe chairman of the Civil Service Commission in Manhattan has the highest pay rate, with an hourly rate $566.60.\nCombining regular and overtime pay, Daniel E Flynn from the Fire Department had the highest total payroll of $521,235.4 in 2021, having worked 1,820 regular hours and 1564.92 overtime hours.\nWilliam E. Gittens from the Department Of Citywide Admin Services has the most overtime worked, which was 18,564 hours.\nThe Office of Collective Bargaining has the highest average total annual payroll per employee, at $96,095.94.\nThe Department of Education has the most employees on the payroll each fiscal year.\nThe Board of Elections has the highest overtime usage, with total overtime worked accounting for about 20% of the total regular hours.\nEmployees who work outside the five boroughs have an average salary of $91,475.31.\nThe city’s aggregate payroll has grown by 35.12% over the past ten fiscal years."
  },
  {
    "objectID": "mp01.html#data",
    "href": "mp01.html#data",
    "title": "mini project 01",
    "section": "",
    "text": "Read data into R\nLoad relevant packages\nNow, let’s take a quick look of the first several rows of the payroll data.\n\nglimpse(data)\n\nRows: 6,225,611\nColumns: 17\n$ fiscal_year                &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2…\n$ payroll_number             &lt;int&gt; 67, 67, 67, 67, 67, 67, 67, 67, 67, 67, 67,…\n$ agency_name                &lt;chr&gt; \"ADMIN FOR CHILDREN'S SVCS\", \"ADMIN FOR CHI…\n$ last_name                  &lt;chr&gt; \"FAYE FALL\", \"KILGORE\", \"WISDOM\", \"MILLER\",…\n$ first_name                 &lt;chr&gt; \"SOKHNA\", \"ORLANTHA\", \"CHERISE\", \"MOYA-GAYE…\n$ mid_init                   &lt;chr&gt; \"M\", \"B\", \"M\", \"S\", \"M\", \"L\", \"O\", NA, \"N\",…\n$ agency_start_date          &lt;chr&gt; \"2023-11-20T00:00:00.000\", \"2023-08-28T00:0…\n$ work_location_borough      &lt;chr&gt; \"BRONX\", \"BROOKLYN\", \"MANHATTAN\", \"MANHATTA…\n$ title_description          &lt;chr&gt; \"CHILD PROTECTIVE SPECIALIST\", \"CHILD PROTE…\n$ leave_status_as_of_june_30 &lt;chr&gt; \"ACTIVE\", \"ACTIVE\", \"ON LEAVE\", \"ON LEAVE\",…\n$ base_salary                &lt;dbl&gt; 62043, 62043, 43144, 62043, 60236, 62043, 6…\n$ pay_basis                  &lt;chr&gt; \"per Annum\", \"per Annum\", \"per Annum\", \"per…\n$ regular_hours              &lt;dbl&gt; 1050.00, 1470.00, 1251.50, 1400.75, 700.00,…\n$ regular_gross_paid         &lt;dbl&gt; 31267.96, 44660.96, 28649.20, 44515.43, 221…\n$ ot_hours                   &lt;dbl&gt; 12.00, 99.75, 30.00, 44.75, 53.00, 146.00, …\n$ total_ot_paid              &lt;dbl&gt; 425.00, 3859.84, 802.42, 1476.98, 1933.33, …\n$ total_other_pay            &lt;dbl&gt; 78.04, 78.14, 78.26, 78.37, 78.47, 78.86, 7…\n\nhead(data, 5)\n\n  fiscal_year payroll_number               agency_name last_name first_name\n1        2024             67 ADMIN FOR CHILDREN'S SVCS FAYE FALL     SOKHNA\n2        2024             67 ADMIN FOR CHILDREN'S SVCS   KILGORE   ORLANTHA\n3        2024             67 ADMIN FOR CHILDREN'S SVCS    WISDOM    CHERISE\n4        2024             67 ADMIN FOR CHILDREN'S SVCS    MILLER  MOYA-GAYE\n5        2024             67 ADMIN FOR CHILDREN'S SVCS   BRADLEY    YASHIKA\n  mid_init       agency_start_date work_location_borough\n1        M 2023-11-20T00:00:00.000                 BRONX\n2        B 2023-08-28T00:00:00.000              BROOKLYN\n3        M 2022-10-24T00:00:00.000             MANHATTAN\n4        S 2023-02-27T00:00:00.000             MANHATTAN\n5        M 2023-02-27T00:00:00.000                 BRONX\n            title_description leave_status_as_of_june_30 base_salary pay_basis\n1 CHILD PROTECTIVE SPECIALIST                     ACTIVE       62043 per Annum\n2 CHILD PROTECTIVE SPECIALIST                     ACTIVE       62043 per Annum\n3         COMMUNITY ASSOCIATE                   ON LEAVE       43144 per Annum\n4 CHILD PROTECTIVE SPECIALIST                   ON LEAVE       62043 per Annum\n5 CHILD PROTECTIVE SPECIALIST                     CEASED       60236 per Annum\n  regular_hours regular_gross_paid ot_hours total_ot_paid total_other_pay\n1       1050.00           31267.96    12.00        425.00           78.04\n2       1470.00           44660.96    99.75       3859.84           78.14\n3       1251.50           28649.20    30.00        802.42           78.26\n4       1400.75           44515.43    44.75       1476.98           78.37\n5        700.00           22133.64    53.00       1933.33           78.47"
  },
  {
    "objectID": "mp01.html#some-formatting",
    "href": "mp01.html#some-formatting",
    "title": "mini project 01",
    "section": "",
    "text": "Here, some formatting is needed for readability. * Convert these columns for conventional formatting *\n\ndata &lt;- data %&gt;%\n  mutate(\n    agency_name = str_to_title(agency_name),\n    last_name = str_to_title(last_name),\n    first_name = str_to_title(first_name),\n    work_location_borough = str_to_title(work_location_borough),\n    title_description = str_to_title(title_description),\n    leave_status_as_of_june_30 = str_to_title(leave_status_as_of_june_30)\n  )"
  },
  {
    "objectID": "mp01.html#some-calculations-related-to-quick-facts",
    "href": "mp01.html#some-calculations-related-to-quick-facts",
    "title": "mini project 01",
    "section": "Some Calculations Related to Quick Facts",
    "text": "Some Calculations Related to Quick Facts\n\nQuestion 1: Which job title has the highest base rate of pay?\n\n\nCode\nnyc_payroll |&gt;\n  slice_max(pay_rate, n = 1) |&gt;\n  select(agency_name, title_description, pay_rate)\n\n\n               agency_name title_description pay_rate\n1 Civil Service Commission          Chairman    566.6\n\n\n\n\nQuestion 2: Whcih individual & in what year had the single highest city total payroll?\n\nIn question 2 and 3, I filtered the dataset to include only observations with a real name.\nDaniel E Flynn from the Fire Department had the highest total payroll of $572,770.2 in 2021, having worked 2,080 regular hours and 1,564.92 overtime hours.\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(! is.na(first_name) & ! is.na(last_name) & \n           first_name != \"Xxxx\" & last_name != \"Xxxx\") |&gt;\n  slice_max(total_compensation, n = 1)\n\n\n  fiscal_year payroll_number     agency_name last_name first_name mid_init\n1        2021             57 Fire Department     Flynn     Daniel        E\n        agency_start_date work_location_borough  title_description\n1 1999-07-07T00:00:00.000              Brooklyn Chief Fire Marshal\n  leave_status_as_of_june_30 base_salary pay_basis regular_hours\n1                     Active      235462 per Annum          2080\n  regular_gross_paid ot_hours total_ot_paid total_other_pay pay_rate\n1           162911.4  1564.92      110078.9         6532.24   129.37\n       full_name total_compensation\n1 Daniel E Flynn           572770.2\n                                                    empl_id\n1 Daniel E Flynn_Chief Fire Marshal_1999-07-07T00:00:00.000\n\n\n\n\nQuestion 3: Which individual worked the most overtime hours in this data set?\n\nIf we aggregate overtime hours by full_name only, the output may not be meaningful. For example, employees with the full name “Md S Islam” hold 20 different positions in NYC, indicating that the distinct employees share the same full name. To improve accuracy, I decided to group by empl_id instead.\nBased on the output, Willam E Gittens, who works as city custodial assistant had a total of 18,564 overtime hours.\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(! is.na(first_name) & ! is.na(last_name) & first_name != \"Xxxx\" \n         & last_name != \"Xxxx\") |&gt;\n  group_by(empl_id) |&gt;\n  summarize(n_ot_hours = sum(ot_hours)) |&gt;\n  slice_max(n_ot_hours, n = 1)\n\n\n# A tibble: 1 × 2\n  empl_id                                                            n_ot_hours\n  &lt;chr&gt;                                                                   &lt;dbl&gt;\n1 William E Gittens_City Custodial Assistant_2014-04-21T00:00:00.000     18565.\n\n\n\n\nQuestion 4: Which agency has the highest average total annual payroll (based and overtime per employee)?\nThe Office of Collective Bargaining has the highest average total annual payroll per employee $105,584.\n\n\nCode\nnyc_payroll |&gt;\n  group_by(fiscal_year, agency_name) |&gt;\n  summarize(\n    avg_annual_payroll = sum(total_compensation) / n_distinct(empl_id)\n    ) |&gt;\n  group_by(agency_name) |&gt;\n  summarize(avg_annual_payroll_by_agency = mean(avg_annual_payroll)) |&gt;\n  slice_max(avg_annual_payroll_by_agency, n = 1)\n\n\n# A tibble: 1 × 2\n  agency_name                     avg_annual_payroll_by_agency\n  &lt;chr&gt;                                                  &lt;dbl&gt;\n1 Office Of Collective Bargaining                      105584.\n\n\n\n\nQuestion 5: Which agency has the most employees on the payroll in each year?\nThe Department of Education has the most employees on the payroll in each fiscal year.\n\n\nCode\nnyc_payroll |&gt;\n  group_by(fiscal_year, agency_name) |&gt;\n  summarize(n_employees = n_distinct(empl_id)) |&gt;\n  slice_max(n_employees, n = 1)\n\n\n# A tibble: 11 × 3\n# Groups:   fiscal_year [11]\n   fiscal_year agency_name                    n_employees\n         &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;\n 1        2014 Dept Of Ed Pedagogical              100583\n 2        2015 Dept Of Ed Pedagogical              111851\n 3        2016 Dept Of Ed Pedagogical              106256\n 4        2017 Dept Of Ed Pedagogical              104624\n 5        2018 Dept Of Ed Pedagogical              107952\n 6        2019 Dept Of Ed Pedagogical              112064\n 7        2020 Dept Of Ed Pedagogical              114994\n 8        2021 Dept Of Ed Per Session Teacher      102326\n 9        2022 Dept Of Ed Pedagogical              110561\n10        2023 Dept Of Ed Pedagogical               57747\n11        2024 Dept Of Ed Pedagogical               73509\n\n\n\n\nQuestion 6: Which agency has the highest overtime usage (compared to regular hours)?\nFirst, we can calculate the total number of regular and overtime hours.\nFrom the output, we can see that although the Board of Elections doesn’t have the highest overtime hours worked, it has the highest percentage of total overtime relative to total regular hours.\n\n\nCode\nnyc_payroll|&gt;\n  group_by(agency_name) |&gt;\n  summarize(\n    total_regular_hours = sum(regular_hours), \n    total_ot_hours = sum(ot_hours), \n    ot_pct_of_regular = total_ot_hours/total_regular_hours\n    ) |&gt;\n  slice_max(ot_pct_of_regular, n = 1)\n\n\n# A tibble: 1 × 4\n  agency_name        total_regular_hours total_ot_hours ot_pct_of_regular\n  &lt;chr&gt;                            &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;\n1 Board Of Elections           15339960.       3062029.             0.200\n\n\n\n\nQuestion 7: What is the average salary of employees who work outside the five boroughs?\nEmployees who work outside the the five boroughs have an average salary of $91,475.31.\n\n\nCode\nnyc_payroll |&gt;\n  filter(! work_location_borough %in% c(\"Manhattan\", \"Brookly\", \"Queens\", \"Bronx\", \n                                        \"Staten Island\") ) |&gt;\n  summarize(avg_salary = sum(total_compensation)/ n_distinct(empl_id)) |&gt; \n  slice_max(avg_salary)\n\n\n  avg_salary\n1   91475.31\n\n\n\n\nQuestion 8: How much has the city’s aggregate payroll grown over the past years?\n\n\nCode\nnyc_payroll|&gt;\n  group_by(fiscal_year) |&gt;\n  summarize(aggregate_payroll = sum(total_compensation)) |&gt;\n  arrange(fiscal_year) |&gt;\n  summarize(payroll_growth_rate = last(aggregate_payroll)/first(aggregate_payroll) - 1)\n\n\n# A tibble: 1 × 1\n  payroll_growth_rate\n                &lt;dbl&gt;\n1               0.351\n\n\n\n\nCode\nprint(sprintf(\"The city's aggregate payroll has grown %.2f%% over the past 10 fiscal years.\" , 0.3511706 * 100))\n\n\n[1] \"The city's aggregate payroll has grown 35.12% over the past 10 fiscal years.\""
  },
  {
    "objectID": "mp01.html#quick-facts",
    "href": "mp01.html#quick-facts",
    "title": "mini project 01",
    "section": "",
    "text": "The chairman of the Civil Service Commission in Manhattan has the highest pay rate, with an hourly rate $566.60.\nCombining regular and overtime pay, Daniel E Flynn from the Fire Department had the highest total payroll of $521,235.4 in 2021, having worked 1,820 regular hours and 1564.92 overtime hours.\nWilliam E. Gittens from the Department Of Citywide Admin Services has the most overtime worked, which was 18,564 hours.\nThe Office of Collective Bargaining has the highest average total annual payroll per employee, at $96,095.94.\nThe Department of Education has the most employees on the payroll each fiscal year.\nThe Board of Elections has the highest overtime usage, with total overtime worked accounting for about 20% of the total regular hours.\nEmployees who work outside the five boroughs have an average salary of $91,475.31.\nThe city’s aggregate payroll has grown by 35.12% over the past ten fiscal years."
  },
  {
    "objectID": "mp01.html#conventional-formatting",
    "href": "mp01.html#conventional-formatting",
    "title": "mini project 01",
    "section": "Conventional Formatting",
    "text": "Conventional Formatting\n\nConvert values in some columns to conventional formatting using string_to_title()\nBy using the unique() function in R, we can get a list of distinct values for a variable. I noticed there are some shorthands in the agency_name variable and some agency names need formal formatting.\n\n\n\nCode\nnyc_payroll &lt;- nyc_payroll |&gt;\n  mutate(\n    agency_name = str_to_title(agency_name),\n    last_name = str_to_title(last_name),\n    first_name = str_to_title(first_name),\n    work_location_borough = str_to_title(work_location_borough),\n    title_description = str_to_title(title_description),\n    leave_status_as_of_june_30 = str_to_title(leave_status_as_of_june_30)\n  )\n\n\n\n\nCode\nnyc_payroll &lt;- nyc_payroll |&gt;\n  mutate(\n    agency_name = case_when(\n      agency_name == \"Bronx Da\" ~ \"Bronx District Attorney\",  \n      agency_name == \"Board Of Correction\" ~ \"Board Of Corrections\",\n      agency_name == \"Dept. Of Design & Construction\" ~ \"Dept Of Design & Construction\",\n      agency_name == \"Dept. Of Homeless Services\" ~ \"Dept Of Homeless Services\",\n      agency_name == \"Office Of Collective Bargainin\" ~ \"Office Of Collective Bargaining\",\n      agency_name == \"Board Of Election\" ~ \"Board Of Elections\",\n      agency_name == \"Doe Custodial Payrol\" ~ \"DOE Custodial Payroll\",\n      TRUE ~ agency_name\n    )\n  )"
  },
  {
    "objectID": "mp01.html#create-an-employee-salary-table-for-eric-l.-adams.",
    "href": "mp01.html#create-an-employee-salary-table-for-eric-l.-adams.",
    "title": "mini project 01",
    "section": "Create an employee salary table for Eric L. Adams.",
    "text": "Create an employee salary table for Eric L. Adams.\n\nnyc_payroll |&gt;\n  filter(first_name == \"Eric\" & last_name == \"Adams\" & title_description == \"Mayor\") |&gt;\n  mutate(\n    total_salary = regular_gross_paid + total_ot_paid\n  ) |&gt;\n  arrange(fiscal_year)\n\n  fiscal_year payroll_number         agency_name last_name first_name mid_init\n1        2022              2 Office Of The Mayor     Adams       Eric        L\n2        2023              2 Office Of The Mayor     Adams       Eric        L\n3        2024              2 Office Of The Mayor     Adams       Eric        L\n        agency_start_date work_location_borough title_description\n1 2022-01-01T00:00:00.000             Manhattan             Mayor\n2 2022-01-01T00:00:00.000             Manhattan             Mayor\n3 2022-01-01T00:00:00.000             Manhattan             Mayor\n  leave_status_as_of_june_30 base_salary pay_basis regular_hours\n1                     Active      258750 per Annum           842\n2                     Active      258750 per Annum          1820\n3                     Active      258750 per Annum          1820\n  regular_gross_paid ot_hours total_ot_paid total_other_pay total_salary\n1           120088.4        0             0               0     120088.4\n2           258041.2        0             0               0     258041.2\n3           257361.2        0             0               0     257361.2\n\n\n\ntbl_txt &lt;- \"\nFiscal Year, Position, Agency, Total Salary\n2022, Mayor, Office of the Mayor, 120088.4  \n2023, Mayor, Office of the Mayor, 258041.2\n2023, Mayor, Office of the Mayor, 257361.2\n\"\n\nread_csv(tbl_txt) |&gt; \n    mutate(`Total Salary` = dollar(`Total Salary`)) |&gt;\n    datatable(options=list(searching=FALSE, \n                           paging=FALSE,\n                           info=FALSE))"
  },
  {
    "objectID": "mp01.html#analzye-the-distribution-of-base_salary",
    "href": "mp01.html#analzye-the-distribution-of-base_salary",
    "title": "mini project 01",
    "section": "Analzye the distribution of base_salary",
    "text": "Analzye the distribution of base_salary\nIn NYC payroll data set, there are three pay types: per annum/prorated annual, per diem and per hour. Let’s first take a look at the distribution of base_salary and determine how to treat any outliers.\n\n\nCode\nfor (i in c(\"per Annum\", \"per Day\", \"per Hour\", \"Prorated Annual\")){\n  print(summary(subset(nyc_payroll, nyc_payroll$pay_basis == i)$base_salary))\n}\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n      1   50028   74683   75786   95365  414707 \n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.01   33.18   33.18   83.18  110.29  999.95 \n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n     0.50      1.00     13.50    810.07     16.52 184931.45 \n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   2090   26843   33046   35215   39950  184000 \n\n\n\nTreatment of Outliers for Per Annum Employees\nThere are some outliers in this category. For example, some observations have a $1 annual rate. After further investigation, I believe these are just not actual payroll records and are immaterial, so I decided no action was needed to handle these values. I applied a 1,820 hours to this group to compute the pay rate.\n\n\nTreatment of Outliers for Per Hour Employees\nFrom the output above, it seems unreasonable that the maximum value for an hourly municipal employees was 184,931.45. Upon further investigation, I found that this value comes from the DOE Custodial Payroll, which has only one pay type-an hourly basis. Additionally, half of the records had a per hour rate exceeding $70,000, which suggests the pay is more likely based on an annual salary rather than an hourly rate.\nTo address the inconsistency between the pay basis and the base salary, I defined a reasonable hourly rate range of $100 for this agency. For observations that fell outside this range, I converted the pay using 1,820 hours to calculate the hourly pay rate.\n\n\nCode\nnyc_payroll |&gt;\n  filter(agency_name == \"DOE Custodial Payroll\") |&gt;\n  select(base_salary) |&gt;\n  summary()\n\n\n  base_salary    \n Min.   :     1  \n 1st Qu.:     1  \n Median : 73774  \n Mean   : 60435  \n 3rd Qu.:123636  \n Max.   :184931  \n\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(agency_name == \"DOE Custodial Payroll\") |&gt;\n  select(pay_basis) |&gt;\n  unique()\n\n\n  pay_basis\n1  per Hour\n\n\n\n\nTreatment of Outliers for Per Diem Employees\nLet’s explore the subset with pay_basis == per Day. We can see that half of the sample in this category have a base salary per day of less than $33.18. If we are converting the pay to an hourly rate by applying 7.5 hours, it’s likely that some values of base_salary are not consistent with the pay_basis being “per Day”. To address this, I developed complex rules that take into account both regular hours and base salary, ensuring that the hourly pay falls within a reasonable range. For example, for the group of employees who worked over 650 regular hours and had a third quantile base salary of $380.90, I applied 7.5-hour workday to standardize the calculation.\n\n\nCode\nnyc_payroll |&gt;\n  filter(pay_basis == \"per Day\") |&gt;\n  select(\"base_salary\") |&gt;\n  summary()\n\n\n  base_salary     \n Min.   :   0.01  \n 1st Qu.:  33.18  \n Median :  33.18  \n Mean   :  83.18  \n 3rd Qu.: 110.29  \n Max.   : 999.95  \n\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(pay_basis == \"per Day\") |&gt;\n  select(\"regular_hours\") |&gt;\n  summary()\n\n\n regular_hours   \n Min.   :-560.0  \n 1st Qu.:   0.0  \n Median :   0.0  \n Mean   : 146.5  \n 3rd Qu.:   0.0  \n Max.   :2245.7"
  },
  {
    "objectID": "mp01.html#missing-values",
    "href": "mp01.html#missing-values",
    "title": "mini project 01",
    "section": "Missing Values",
    "text": "Missing Values\n\nBe aware that there are over 10,000 missing values in first_name and last_name. Due to confidentiality, some first and last names have been replaced with ‘Xxxx’. For example, approximately 3,541 payroll records in the Police Department having missing names in the data set.\nI decided to exclude these records from the calculations for certain quick-facts related questions later.\n\n\n\nCode\nprint(any(is.na(nyc_payroll$first_name)))\n\n\n[1] TRUE\n\n\nCode\nprint(any(is.na(nyc_payroll$last_name)))\n\n\n[1] TRUE\n\n\nCode\nprint(sum(is.na(nyc_payroll$first_name)))\n\n\n[1] 14002\n\n\nCode\nprint(sum(is.na(nyc_payroll$last_name)))\n\n\n[1] 13934"
  },
  {
    "objectID": "mp01.html#question-1-which-job-title-has-the-highest-base-rate-of-pay",
    "href": "mp01.html#question-1-which-job-title-has-the-highest-base-rate-of-pay",
    "title": "mini project 01",
    "section": "Question 1: Which job title has the highest base rate of pay?",
    "text": "Question 1: Which job title has the highest base rate of pay?\n\nnyc_payroll |&gt;\n  slice_max(pay_rate, n = 1) |&gt;\n  select(agency_name, title_description, pay_rate)\n\n            agency_name  title_description pay_rate\n1 DOE Custodial Payroll Custodian Engineer 184931.5"
  },
  {
    "objectID": "mp01.html#question-2-whcih-individual-in-what-year-had-the-single-highest-city-total-payroll",
    "href": "mp01.html#question-2-whcih-individual-in-what-year-had-the-single-highest-city-total-payroll",
    "title": "mini project 01",
    "section": "Question 2: Whcih individual & in what year had the single highest city total payroll?",
    "text": "Question 2: Whcih individual & in what year had the single highest city total payroll?\n\nIn question 2 and 3, I filtered the dataset to include only observations with a real name.\nDaniel E Flynn from the Fire Department had the highest total payroll of $572,770.2 in 2021, having worked 2,080 regular hours and 1,564.92 overtime hours.\n\n\nnyc_payroll |&gt;\n  filter(! is.na(first_name) & ! is.na(last_name) & first_name != \"Xxxx\" & last_name != \"Xxxx\") |&gt;\n  slice_max(total_compensation, n = 1)\n\n  fiscal_year payroll_number     agency_name last_name first_name mid_init\n1        2021             57 Fire Department     Flynn     Daniel        E\n        agency_start_date work_location_borough  title_description\n1 1999-07-07T00:00:00.000              Brooklyn Chief Fire Marshal\n  leave_status_as_of_june_30 base_salary pay_basis regular_hours\n1                     Active      235462 per Annum          2080\n  regular_gross_paid ot_hours total_ot_paid total_other_pay pay_rate\n1           162911.4  1564.92      110078.9         6532.24   129.37\n       full_name total_compensation\n1 Daniel E Flynn           572770.2\n                                                    empl_id\n1 Daniel E Flynn_Chief Fire Marshal_1999-07-07T00:00:00.000"
  },
  {
    "objectID": "mp01.html#question-3-which-individual-worked-the-most-overtime-hours-in-this-data-set",
    "href": "mp01.html#question-3-which-individual-worked-the-most-overtime-hours-in-this-data-set",
    "title": "mini project 01",
    "section": "Question 3: Which individual worked the most overtime hours in this data set?",
    "text": "Question 3: Which individual worked the most overtime hours in this data set?\n\nIf we aggregate overtime hours by full_name only, the output may not be meaningful. For example, employees with the full name “Md S Islam” hold 20 different positions in NYC, indicating that the distinct employees share the same full name. To improve accuracy, I decided to group by empl_id instead.\nBased on the output, Willam E Gittens, who works as city custodial assistant had a total of 18,564 overtime hours.\n\n\nnyc_payroll |&gt;\n  filter(! is.na(first_name) & ! is.na(last_name) & first_name != \"Xxxx\" & last_name != \"Xxxx\") |&gt;\n  group_by(empl_id) |&gt;\n  summarize(n_ot_hours = sum(ot_hours)) |&gt;\n  slice_max(n_ot_hours, n = 1)\n\n# A tibble: 1 × 2\n  empl_id                                                            n_ot_hours\n  &lt;chr&gt;                                                                   &lt;dbl&gt;\n1 William E Gittens_City Custodial Assistant_2014-04-21T00:00:00.000     18565."
  },
  {
    "objectID": "mp01.html#question-4-which-agency-has-the-highest-average-total-annual-payroll-based-and-overtime-per-employee",
    "href": "mp01.html#question-4-which-agency-has-the-highest-average-total-annual-payroll-based-and-overtime-per-employee",
    "title": "mini project 01",
    "section": "Question 4: Which agency has the highest average total annual payroll (based and overtime per employee)?",
    "text": "Question 4: Which agency has the highest average total annual payroll (based and overtime per employee)?\nThe Office of Collective Bargaining has the highest average total annual payroll per employee $105,584.\n\nnyc_payroll |&gt;\n  group_by(fiscal_year, agency_name) |&gt;\n  summarize(\n    avg_annual_payroll = sum(total_compensation) / n_distinct(empl_id)\n    ) |&gt;\n  group_by(agency_name) |&gt;\n  summarize(avg_annual_payroll_by_agency = mean(avg_annual_payroll)) |&gt;\n  slice_max(avg_annual_payroll_by_agency, n = 1)\n\n# A tibble: 1 × 2\n  agency_name                     avg_annual_payroll_by_agency\n  &lt;chr&gt;                                                  &lt;dbl&gt;\n1 Office Of Collective Bargaining                      105584."
  },
  {
    "objectID": "mp01.html#question-5-which-agency-has-the-most-employees-on-the-payroll-in-each-year",
    "href": "mp01.html#question-5-which-agency-has-the-most-employees-on-the-payroll-in-each-year",
    "title": "mini project 01",
    "section": "Question 5: Which agency has the most employees on the payroll in each year?",
    "text": "Question 5: Which agency has the most employees on the payroll in each year?\nThe Department of Education has the most employees on the payroll in each fiscal year.\n\nnyc_payroll |&gt;\n  group_by(fiscal_year, agency_name) |&gt;\n  summarize(n_employees = n_distinct(empl_id)) |&gt;\n  slice_max(n_employees, n = 1)\n\n# A tibble: 11 × 3\n# Groups:   fiscal_year [11]\n   fiscal_year agency_name                    n_employees\n         &lt;int&gt; &lt;chr&gt;                                &lt;int&gt;\n 1        2014 Dept Of Ed Pedagogical              100583\n 2        2015 Dept Of Ed Pedagogical              111851\n 3        2016 Dept Of Ed Pedagogical              106256\n 4        2017 Dept Of Ed Pedagogical              104624\n 5        2018 Dept Of Ed Pedagogical              107952\n 6        2019 Dept Of Ed Pedagogical              112064\n 7        2020 Dept Of Ed Pedagogical              114994\n 8        2021 Dept Of Ed Per Session Teacher      102326\n 9        2022 Dept Of Ed Pedagogical              110561\n10        2023 Dept Of Ed Pedagogical               57747\n11        2024 Dept Of Ed Pedagogical               73509"
  },
  {
    "objectID": "mp01.html#question-6-which-agency-has-the-highest-overtime-usage-compared-to-regular-hours",
    "href": "mp01.html#question-6-which-agency-has-the-highest-overtime-usage-compared-to-regular-hours",
    "title": "mini project 01",
    "section": "Question 6: Which agency has the highest overtime usage (compared to regular hours)?",
    "text": "Question 6: Which agency has the highest overtime usage (compared to regular hours)?\nFirst, we can calculate the total number of regular and overtime hours.\nFrom the output, we can see that although the Board of Elections doesn’t have the highest overtime hours worked, it has the highest percentage of total overtime relative to total regular hours.\n\nnyc_payroll|&gt;\n  group_by(agency_name) |&gt;\n  summarize(\n    total_regular_hours = sum(regular_hours), \n    total_ot_hours = sum(ot_hours), \n    ot_pct_of_regular = total_ot_hours/total_regular_hours\n    ) |&gt;\n  slice_max(ot_pct_of_regular, n = 1)\n\n# A tibble: 1 × 4\n  agency_name        total_regular_hours total_ot_hours ot_pct_of_regular\n  &lt;chr&gt;                            &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;\n1 Board Of Elections           15339960.       3062029.             0.200"
  },
  {
    "objectID": "mp01.html#question-7-what-is-the-average-salary-of-employees-who-work-outside-the-five-boroughs",
    "href": "mp01.html#question-7-what-is-the-average-salary-of-employees-who-work-outside-the-five-boroughs",
    "title": "mini project 01",
    "section": "Question 7: What is the average salary of employees who work outside the five boroughs?",
    "text": "Question 7: What is the average salary of employees who work outside the five boroughs?\nEmployees who work outside the the five boroughs have an average salary of $91,475.31.\n\nnyc_payroll |&gt;\n  filter(! work_location_borough %in% c(\"Manhattan\", \"Brookly\", \"Queens\", \"Bronx\", \n                                        \"Staten Island\") ) |&gt;\n  summarize(avg_salary = sum(total_compensation)/ n_distinct(empl_id)) |&gt; \n  slice_max(avg_salary)\n\n  avg_salary\n1   91475.31"
  },
  {
    "objectID": "mp01.html#question-8-how-much-has-the-citys-aggregate-payroll-grown-over-the-past-years",
    "href": "mp01.html#question-8-how-much-has-the-citys-aggregate-payroll-grown-over-the-past-years",
    "title": "mini project 01",
    "section": "Question 8: How much has the city’s aggregate payroll grown over the past years?",
    "text": "Question 8: How much has the city’s aggregate payroll grown over the past years?\n\nnyc_payroll|&gt;\n  group_by(fiscal_year) |&gt;\n  summarize(aggregate_payroll = sum(total_compensation)) |&gt;\n  arrange(fiscal_year) |&gt;\n  summarize(payroll_growth_rate = last(aggregate_payroll)/first(aggregate_payroll) - 1)\n\n# A tibble: 1 × 1\n  payroll_growth_rate\n                &lt;dbl&gt;\n1               0.351\n\n\n\nprint(sprintf(\"The city's aggregate payroll has grown %.2f%% over the past 10 fiscal years.\" , 0.3511706 * 100))\n\n[1] \"The city's aggregate payroll has grown 35.12% over the past 10 fiscal years.\""
  },
  {
    "objectID": "mp01.html#capping-salaries-at-mayoral-level",
    "href": "mp01.html#capping-salaries-at-mayoral-level",
    "title": "mini project 01",
    "section": "Capping Salaries at Mayoral Level",
    "text": "Capping Salaries at Mayoral Level\nThe first policy is to cap salaries at the Mayoral level. It’s worth noting that Mayor Bloomberg’s salary in 2014 was $1, which was an exception. To ensure a fair analysis, I adjusted it to reflect a standard NYC mayor’s pay.\nFirst, I computed the total mayor pay for each fiscal year and used it as a benchmark to identify the employees whose total compensation exceeded the amount in the same fiscal year. From there, I conducted a salary cap analysis.\nBased on my analysis, if the salary cap policy had been implemented, it would have saved a total of $92,359,814 over the past ten fiscal years. And the captains from the Fire Department and the Department of Correction would bear the most brunt of the salary cap.\nHere is something interesting to note: If we only consider their base salaries, they are actually below the benchmark. However, since 2015, they have worked an average of 1,300 overtime hours per year, which led to their total compensation exceeding the Mayor’s level. Next, I will explore the impact of reducing the overtime hours by increasing full-time employment.\n\n\nCode\nbenchmark &lt;- nyc_payroll |&gt;\n  filter(title_description == \"Mayor\") |&gt;\n  group_by(fiscal_year) |&gt;\n  summarize(total_mayor_pay = sum(case_when(\n    fiscal_year == 2014 ~ 2 * total_compensation,\n    TRUE ~ total_compensation)) \n  )\n\n\n\n\nCode\nnyc_payroll &lt;- nyc_payroll |&gt;\n  left_join(benchmark, by = \"fiscal_year\") |&gt;\n  rename(salary_cap = total_mayor_pay) |&gt;\n  mutate(\n    is_above_the_cap = ifelse(\n      total_compensation &gt; salary_cap, \"Yes\", \"No\"\n    ),\n    pay_savings_from_cap = ifelse(\n      is_above_the_cap == \"Yes\", round(total_compensation - salary_cap, 2), 0\n    )\n  )\n\n\n\n\nCode\nsum(nyc_payroll$pay_savings_from_cap)\n\n\n[1] 92359814\n\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(is_above_the_cap == \"Yes\") |&gt;\n  group_by(agency_name, title_description) |&gt;\n  summarize(total_savings = sum(pay_savings_from_cap)) |&gt;\n  arrange(desc(total_savings))\n\n\n# A tibble: 320 × 3\n# Groups:   agency_name [63]\n   agency_name                   title_description                 total_savings\n   &lt;chr&gt;                         &lt;chr&gt;                                     &lt;dbl&gt;\n 1 Department Of Correction      Captain                               13433166.\n 2 Fire Department               Captain                                9358013.\n 3 Department Of Correction      Warden-Assistant Deputy Warden T…      6921116.\n 4 Department Of Correction      Correction Officer                     4806111.\n 5 Police Department             Police Officer D/A Detective 1st…      3776059.\n 6 Police Department             Lieutenant D/A Commander Of Dete…      3412895.\n 7 Police Department             Captain Detailed As Assistant Ch…      2850212.\n 8 Police Department             Lieutenant D/A Special Assignment      2731127.\n 9 Department Of Correction      Senior Stationary Engineer             2522180.\n10 Dept Of Health/Mental Hygiene City Medical Examiner                  2513273.\n# ℹ 310 more rows\n\n\n\n\nCode\nnyc_payroll |&gt;\n  filter(is_above_the_cap == \"Yes\", agency_name %in% c(\"Department Of Correction\", \"Fire Department\"), \n         title_description == \"Captain\") |&gt;\n  group_by(fiscal_year) |&gt;\n  summarize(mean(ot_hours))\n\n\n# A tibble: 9 × 2\n  fiscal_year `mean(ot_hours)`\n        &lt;int&gt;            &lt;dbl&gt;\n1        2015            1429.\n2        2016            1525.\n3        2017            1435.\n4        2018            1612.\n5        2020            1550.\n6        2021            1418.\n7        2022            1444.\n8        2023            1302.\n9        2024            1154."
  },
  {
    "objectID": "mp01.html#increasing-staffing-to-reduce-overtime-expenses",
    "href": "mp01.html#increasing-staffing-to-reduce-overtime-expenses",
    "title": "mini project 01",
    "section": "Increasing Staffing to Reduce Overtime Expenses",
    "text": "Increasing Staffing to Reduce Overtime Expenses\nNow, I wanted to explore the the impact and savings by increasing staffing to reduce overtime hours. First, I aggregated the total overtime hours for each combination of agency and job title and calculated the number of full-time employee equivalents using a standard of 1,820 hours per full-time employee. Using the average pay rate for each combination of agency and position, I then computed the potential full-time salary if overtime hours were replaced by equivalent full-time positions.\nFrom my analysis, we can see that replacing overtime hours with full-time employees would have resulted in total savings of $8,293,349,444 over the past ten fiscal years. This policy proves to be more effective in generating savings than the salary cap.\nAs previously mentioned, there are actually very few municipal employees whose base salaries exceed the Mayor’s salary. The main reason their total compensation surpasses this level is the significant amount of overtime worked.\nIn addition, we can see that a 50% savings can be achieved from increasing the number of full-time employees to reduce overtime hours, particularly in the Police Department and the Fire Department.\n\n\nCode\novertime_replacement &lt;- nyc_payroll |&gt;\n  mutate(agency_role = paste(agency_name, title_description, sep = \"_\")) |&gt;\n  group_by(fiscal_year, agency_role) |&gt;\n  summarize(avg_pay_rate = mean(pay_rate), total_ot_worked = sum(ot_hours)) |&gt;\n  filter(total_ot_worked &gt; 0) |&gt;\n  mutate(\n    full_time_equivalent = round(total_ot_worked/1820, 6),\n    full_time_pay = round(avg_pay_rate * full_time_equivalent * 1820, 2),\n    ot_reduction_savings = total_ot_worked * 1.5 * avg_pay_rate - full_time_pay,\n    agency = str_extract(agency_role, \"^[^_]+\")\n  ) |&gt;\n  ungroup() |&gt;\n  mutate(\n    total_savings = sum(ot_reduction_savings),\n    savings_pct_of_total = ot_reduction_savings/total_savings\n    )\n\n\n\n\nCode\novertime_replacement |&gt;\n  group_by(agency) |&gt;\n  summarize(total_savings_pct_by_agency = round(sum(savings_pct_of_total), 6)) |&gt;\n  arrange(desc(total_savings_pct_by_agency))\n\n\n# A tibble: 93 × 2\n   agency                         total_savings_pct_by_agency\n   &lt;chr&gt;                                                &lt;dbl&gt;\n 1 Police Department                                   0.383 \n 2 Fire Department                                     0.190 \n 3 Department Of Correction                            0.112 \n 4 Department Of Sanitation                            0.0799\n 5 Nyc Housing Authority                               0.0566\n 6 Department Of Transportation                        0.0321\n 7 Dept Of Environment Protection                      0.0249\n 8 Hra/Dept Of Social Services                         0.0246\n 9 Admin For Children's Svcs                           0.0208\n10 Dept Of Citywide Admin Svcs                         0.0120\n# ℹ 83 more rows\n\n\n\n\nCode\nsum(overtime_replacement$ot_reduction_savings)\n\n\n[1] 8293349444"
  },
  {
    "objectID": "mp01.html#create-your-own-policy-proposal",
    "href": "mp01.html#create-your-own-policy-proposal",
    "title": "mini project 01",
    "section": "Create Your Own Policy Proposal",
    "text": "Create Your Own Policy Proposal"
  },
  {
    "objectID": "mp01.html#create-an-employee-salary-table-for-eric-l.-adams",
    "href": "mp01.html#create-an-employee-salary-table-for-eric-l.-adams",
    "title": "mini project 01",
    "section": "Create an employee salary table for Eric L. Adams",
    "text": "Create an employee salary table for Eric L. Adams\n\n\nCode\nnyc_payroll |&gt;\n  filter(first_name == \"Eric\" & last_name == \"Adams\" & title_description == \"Mayor\") |&gt;\n  mutate(\n    total_salary = regular_gross_paid + total_ot_paid\n  ) |&gt;\n  arrange(fiscal_year)\n\n\n  fiscal_year payroll_number         agency_name last_name first_name mid_init\n1        2022              2 Office Of The Mayor     Adams       Eric        L\n2        2023              2 Office Of The Mayor     Adams       Eric        L\n3        2024              2 Office Of The Mayor     Adams       Eric        L\n        agency_start_date work_location_borough title_description\n1 2022-01-01T00:00:00.000             Manhattan             Mayor\n2 2022-01-01T00:00:00.000             Manhattan             Mayor\n3 2022-01-01T00:00:00.000             Manhattan             Mayor\n  leave_status_as_of_june_30 base_salary pay_basis regular_hours\n1                     Active      258750 per Annum           842\n2                     Active      258750 per Annum          1820\n3                     Active      258750 per Annum          1820\n  regular_gross_paid ot_hours total_ot_paid total_other_pay total_salary\n1           120088.4        0             0               0     120088.4\n2           258041.2        0             0               0     258041.2\n3           257361.2        0             0               0     257361.2\n\n\n\n\nCode\ntbl_txt &lt;- \"\nFiscal Year, Position, Agency, Total Salary\n2022, Mayor, Office of the Mayor, 120088.4  \n2023, Mayor, Office of the Mayor, 258041.2\n2023, Mayor, Office of the Mayor, 257361.2\n\"\n\nread_csv(tbl_txt) |&gt; \n    mutate(`Total Salary` = dollar(`Total Salary`)) |&gt;\n    datatable(options=list(searching=FALSE, \n                           paging=FALSE,\n                           info=FALSE))"
  }
]